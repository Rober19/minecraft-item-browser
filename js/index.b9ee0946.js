(function(e){function t(t){for(var r,a,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={index:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/minecraft-item-browser/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=(n("4989"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)}),s=[],a={name:"app"},o=a,c=(n("5c0b"),n("2877")),u=Object(c["a"])(o,i,s,!1,null,null,null),l=u.exports,d=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("Sidebar",{attrs:{results:e.results},on:{runSearch:e.updateQuery}}),n("ResultView",{attrs:{item:e.selectedItem}})],1)])},m=[],f=(n("4de4"),n("4d63"),n("ac1f"),n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-md-3 mb-4"},[n("h4",[e._v("Search")]),n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[e._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mutableQuery,expression:"mutableQuery"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search"},domProps:{value:e.mutableQuery},on:{input:[function(t){t.target.composing||(e.mutableQuery=t.target.value)},e.runSearch]}})])]),n("h4",[e._v("Results")]),n("div",{staticClass:"list-group",attrs:{id:"search_results"}},e._l(e.results,(function(t){return n("router-link",{key:t.id,staticClass:"list-group-item",attrs:{to:{name:"Home",params:{item_name:t.name}}}},[e._v(" "+e._s(t.displayName)+" "),n("img",{staticClass:"mc-block ml-1",attrs:{src:t.texture}})])})),1)])}),h=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[n("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])])}],v=n("b047"),b=n.n(v),_=(n("d3b7"),n("3ca3"),n("ddb0"),n("4dec")),y=new _["a"]("minecraft");y.version(1).stores({items:"++id, &name, displayName, stackSize, texture",recipes:"++id, *ingredients, *result.id, inShape, result"}),y.open(),y.on("ready",(function(){return y.items.count((function(e){if(e>0)console.log("Already populated");else{console.log("Database is empty. Populating from ajax call...");var t=new Promise((function(e,t){$.ajax("/minecraft-item-browser/js/items.json",{type:"get",dataType:"json",error:function(e,n){t(n)},success:function(t){e(t)}})})),n=new Promise((function(e,t){$.ajax("/minecraft-item-browser/js/recipes.json",{type:"get",dataType:"json",error:function(e,n){t(n)},success:function(t){e(t)}})}));new Promise.all([t,n]).then((function(e){return console.log("Got ajax response. Adding objects.",e),console.log("Calling bulkAdd() to insert objects..."),new Promise.all([y.items.bulkAdd(e[0]),y.recipes.bulkAdd(e[1])])})).then((function(){console.log("Done populating.")}))}}))}));var g=y,w={props:{results:Array},created:function(){if(this.$route.params.item_name){var e=this;g.items.get({name:this.$route.params.item_name}).then((function(t){e.mutableQuery=t.displayName,e.$emit("runSearch",e.mutableQuery)}))}},data:function(){return{mutableQuery:""}},computed:{runSearch:function(){return b()((function(e){this.$emit("runSearch",e.srcElement.value)}),50).bind(this)}}},C=w,j=Object(c["a"])(C,f,h,!1,null,null,null),x=j.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.item?n("div",{staticClass:"col-md-9"},[n("h1",{staticClass:"mb-5"},[e._v(e._s(e.item.displayName))]),e.creates.length?n("div",{staticClass:"mb-4"},[n("h2",[e._v("Created By")]),n("div",{staticClass:"row"},e._l(e.creates,(function(e){return n("Recipe",{key:e.id,attrs:{recipe:e}})})),1)]):e._e(),e.used_id.length?n("div",{staticClass:"mb-4"},[n("h2",[e._v("Used In")]),n("div",{staticClass:"row"},e._l(e.used_id,(function(e){return n("Recipe",{key:e.id,attrs:{recipe:e,showHeader:""}})})),1)]):e._e()]):n("div",{staticClass:"col-md-9"},[n("p",[e._v("Do a search and select an item.")])])},O=[],S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isReady?n("div",{staticClass:"col-6 col-xl-4 mb-3"},[n("div",{staticClass:"card recipe"},[e.showHeader?n("div",{staticClass:"card-header"},[n("h4",{staticClass:"mb-0"},[e._v(e._s(e.createsItem.displayName))])]):e._e(),n("div",{staticClass:"card-body d-flex"},[e.inputGrid?n("div",{staticClass:"input-recipe"},e._l(e.inputGrid,(function(t,r){return n("div",{key:r},e._l(t,(function(t,r){return n("span",{key:r,staticClass:"invslot"},[t?n("Item",{attrs:{item:e.getIngredientItem(t)}}):e._e()],1)})),0)})),0):e._e(),n("i",{staticClass:"fa fa-chevron-right"}),n("span",{staticClass:"result"},[n("Item",{staticClass:"invslot",attrs:{item:e.createsItem}}),e.recipe.result.count>1?n("span",{staticClass:"count"},[e._v(" "+e._s(e.recipe.result.count)+" ")]):e._e()],1)])])]):e._e()},k=[],P=(n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-link",{attrs:{to:{name:"Home",params:{item_name:e.item.name}}}},[n("img",{staticClass:"mc-block",attrs:{src:e.item.texture}})])}),A=[],E={props:{item:Object},mounted:function(){$(this.$el).tooltip({title:this.item.displayName,position:"top"})}},Q=E,R=Object(c["a"])(Q,P,A,!1,null,null,null),N=R.exports,H={props:{recipe:Object,showHeader:{type:Boolean,default:!1}},components:{Item:N},data:function(){return{createsItem:void 0,loadedIngredients:void 0}},computed:{isReady:function(){return!!this.createsItem&&!!this.loadedIngredients},inputGrid:function(){for(var e=[[],[],[]],t=0;t<9;t++){var n=Math.floor(t/3),r=t%3;this.recipe.inShape?this.recipe.inShape[2-n]?e[n][r]=this.recipe.inShape[2-n][r]:e[n][r]=null:this.recipe.ingredients&&(e[n][r]=this.recipe.ingredients[t])}return e}},methods:{getIngredientItem:function(e){return this.loadedIngredients.find((function(t){return t.id==e}))}},created:function(){var e=this;g.items.get(this.recipe.result.id).then((function(t){e.createsItem=t})),g.items.bulkGet(this.recipe.ingredients).then((function(t){e.loadedIngredients=t}))}},G=H,M=Object(c["a"])(G,S,k,!1,null,null,null),T=M.exports,q={props:{item:Object},components:{Recipe:T},data:function(){return{creates:[],used_id:[]}},watch:{item:function(e){var t=this;g.recipes.where("result.id").equals(e.id).toArray().then((function(e){t.creates=e})),g.recipes.where("ingredients").equals(e.id).toArray().then((function(e){t.used_id=e}))}}},D=q,B=Object(c["a"])(D,I,O,!1,null,null,null),J=B.exports,V={components:{Sidebar:x,ResultView:J},data:function(){return{results:[],selectedItem:void 0}},methods:{updateQuery:function(e){if(e.length){var t=this,n=new RegExp(e,"i");g.items.filter((function(e){return n.test(e.displayName)})).limit(10).toArray().then((function(e){t.results=e}))}else this.results=[]}},watch:{"$route.params":{immediate:!0,handler:function(e){var t=this;e.item_name&&g.items.where("name").equals(e.item_name).first().then((function(e){e&&(t.selectedItem=e)}))}}}},z=V,U=Object(c["a"])(z,p,m,!1,null,null,null),F=U.exports;r["a"].use(d["a"]);var K=new d["a"]({base:"/minecraft-item-browser/",routes:[{path:"/:item_name?",name:"Home",component:F,props:!0}]}),L=K;window.$=n("1157"),r["a"].config.productionTip=!1,new r["a"]({router:L,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),i=n.n(r);i.a},"9c0c":function(e,t,n){}});
//# sourceMappingURL=index.b9ee0946.js.map